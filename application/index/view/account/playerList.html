{extend name="common/base" /}

{block name="title"}玩家列表{/block}
{block name="content"}
<div class="layui-card">
  <div class="layui-card-header layuiadmin-card-header-auto">
    <h2>玩家列表</h2>
    <form class="layui-form" action="{:url('account.searchPlayer')}" method="post">
      <div class="layui-inline">
        <div class="layui-input-inline" style="width: 200px;">
          <input type="text" name="account" placeholder="玩家账号" autocomplete="off" class="layui-input">
        </div>
      </div>

      <div class="layui-inline">
        <div class="layui-input-inline" style="width: 150px;">
          <button type="submit" class="layui-btn" lay-submit="" lay-filter="search-player">搜索</button>
        </div>
      </div>
    </form>
  </div>

  <div class="layui-card-body">
    <table id="playerlist" lay-filter="playerlist"></table>
  </div>
</div>

{/block}

{block name="script"}
<script type="text/html" id="playerlist-bar">
  <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
</script>
<script>
  layui.use(['layer','table','form'],function () {
    var layer = layui.layer
        ,form = layui.form
        ,table = layui.table;
    //用户表格初始化
    var dataTable = table.render({
      elem: '#playerlist'
      , height: 500
      , url: "{:url('account.playerListData')}" //数据接口
      , where: {}
      , page: true //开启分页
      , cols: [[ //表头
         {field: 'id', title: 'ID', sort: true, width: 80}
        , {field: 'account', title: '账号'}
        , {field: 'room', title: '房间'}
        , {field: 'recharge', title: '总充值'}
        , {field: 'achieve', title: '总业绩'}
        , {field: 'money', title: '余额'}
        , {field: 'comment', title: '备注'}
        , {fixed: 'right', title:'操作', align:'center', toolbar: '#playerlist-bar'}
      ]]
    });

    table.on('tool(playerlist)', function(obj) {
      var data = obj.data //获得当前行数据
          ,layEvent = obj.event //获得 lay-event 对应的值
          ,tr = obj.tr; //获得当前行 tr 的DOM对象
      if (layEvent === 'edit') {
        layer.msg('你点击了编辑, 当前用户id='+data.id);
      }

    });
  });
</script>
{/block}

